import{r as d,j as c,i as H,R as j,k as N,h as ge,T as xe}from"./index-DFhiboKI.js";import{A as ve,I as z}from"./input-D3TF6_4U.js";import{L as V}from"./label-DAjYo3cR.js";import{u as be,a as Se}from"./index.esm-CWnop-W2.js";function Q(e,[t,r]){return Math.min(r,Math.max(t,e))}function _(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function J(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ce(...e){return t=>{let r=!1;const n=e.map(o=>{const a=J(o,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let o=0;o<n.length;o++){const a=n[o];typeof a=="function"?a():J(e[o],null)}}}}function A(...e){return d.useCallback(Ce(...e),e)}function Z(e,t=[]){let r=[];function n(a,s){const i=d.createContext(s),u=r.length;r=[...r,s];const m=l=>{var p;const{scope:h,children:b,...g}=l,x=((p=h==null?void 0:h[e])==null?void 0:p[u])||i,v=d.useMemo(()=>g,Object.values(g));return c.jsx(x.Provider,{value:v,children:b})};m.displayName=a+"Provider";function C(l,h){var x;const b=((x=h==null?void 0:h[e])==null?void 0:x[u])||i,g=d.useContext(b);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${l}\` must be used within \`${a}\``)}return[m,C]}const o=()=>{const a=r.map(s=>d.createContext(s));return function(i){const u=(i==null?void 0:i[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return o.scopeName=e,[n,we(o,...t)]}function we(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const s=n.reduce((i,{useScope:u,scopeName:m})=>{const l=u(a)[`__scope${m}`];return{...i,...l}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}function ee(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function ye({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,o]=Pe({defaultProp:t,onChange:r}),a=e!==void 0,s=a?e:n,i=ee(r),u=d.useCallback(m=>{if(a){const l=typeof m=="function"?m(e):m;l!==e&&i(l)}else o(m)},[a,e,o,i]);return[s,u]}function Pe({defaultProp:e,onChange:t}){const r=d.useState(e),[n]=r,o=d.useRef(n),a=ee(t);return d.useEffect(()=>{o.current!==n&&(a(n),o.current=n)},[n,o,a]),r}var Re=d.createContext(void 0);function De(e){const t=d.useContext(Re);return e||t||"ltr"}function je(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ne=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{};function Ae(e){const[t,r]=d.useState(void 0);return Ne(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let s,i;if("borderBoxSize"in a){const u=a.borderBoxSize,m=Array.isArray(u)?u[0]:u;s=m.inlineSize,i=m.blockSize}else s=e.offsetWidth,i=e.offsetHeight;r({width:s,height:i})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Me=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],K=Me.reduce((e,t)=>{const r=d.forwardRef((n,o)=>{const{asChild:a,...s}=n,i=a?H:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(i,{...s,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Ee(e){const t=e+"CollectionProvider",[r,n]=Z(t),[o,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:g,children:x}=b,v=j.useRef(null),p=j.useRef(new Map).current;return c.jsx(o,{scope:g,itemMap:p,collectionRef:v,children:x})};s.displayName=t;const i=e+"CollectionSlot",u=j.forwardRef((b,g)=>{const{scope:x,children:v}=b,p=a(i,x),w=A(g,p.collectionRef);return c.jsx(H,{ref:w,children:v})});u.displayName=i;const m=e+"CollectionItemSlot",C="data-radix-collection-item",l=j.forwardRef((b,g)=>{const{scope:x,children:v,...p}=b,w=j.useRef(null),f=A(g,w),S=a(m,x);return j.useEffect(()=>(S.itemMap.set(w,{ref:w,...p}),()=>void S.itemMap.delete(w))),c.jsx(H,{[C]:"",ref:f,children:v})});l.displayName=m;function h(b){const g=a(e+"CollectionConsumer",b);return j.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const p=Array.from(v.querySelectorAll(`[${C}]`));return Array.from(g.itemMap.values()).sort((S,P)=>p.indexOf(S.ref.current)-p.indexOf(P.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:s,Slot:u,ItemSlot:l},h,n]}var te=["PageUp","PageDown"],re=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ne={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},k="Slider",[U,_e,ke]=Ee(k),[oe,st]=Z(k,[ke]),[Ie,O]=oe(k),se=d.forwardRef((e,t)=>{const{name:r,min:n=0,max:o=100,step:a=1,orientation:s="horizontal",disabled:i=!1,minStepsBetweenThumbs:u=0,defaultValue:m=[n],value:C,onValueChange:l=()=>{},onValueCommit:h=()=>{},inverted:b=!1,form:g,...x}=e,v=d.useRef(new Set),p=d.useRef(0),f=s==="horizontal"?Te:ze,[S=[],P]=ye({prop:C,defaultProp:m,onChange:y=>{var M;(M=[...v.current][p.current])==null||M.focus(),l(y)}}),L=d.useRef(S);function F(y){const R=Le(S,y);I(y,R)}function he(y){I(y,p.current)}function pe(){const y=L.current[p.current];S[p.current]!==y&&h(S)}function I(y,R,{commit:M}={commit:!1}){const X=Ue(a),$=Ye(Math.round((y-n)/a)*a+n,X),T=Q($,[n,o]);P((E=[])=>{const D=Ke(E,T,R);if(He(D,u*a)){p.current=D.indexOf(T);const G=String(D)!==String(E);return G&&M&&h(D),G?D:E}else return E})}return c.jsx(Ie,{scope:e.__scopeSlider,name:r,disabled:i,min:n,max:o,valueIndexToChangeRef:p,thumbs:v.current,values:S,orientation:s,form:g,children:c.jsx(U.Provider,{scope:e.__scopeSlider,children:c.jsx(U.Slot,{scope:e.__scopeSlider,children:c.jsx(f,{"aria-disabled":i,"data-disabled":i?"":void 0,...x,ref:t,onPointerDown:_(x.onPointerDown,()=>{i||(L.current=S)}),min:n,max:o,inverted:b,onSlideStart:i?void 0:F,onSlideMove:i?void 0:he,onSlideEnd:i?void 0:pe,onHomeKeyDown:()=>!i&&I(n,0,{commit:!0}),onEndKeyDown:()=>!i&&I(o,S.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:R})=>{if(!i){const $=te.includes(y.key)||y.shiftKey&&re.includes(y.key)?10:1,T=p.current,E=S[T],D=a*$*R;I(E+D,T,{commit:!0})}}})})})})});se.displayName=k;var[ae,ie]=oe(k,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Te=d.forwardRef((e,t)=>{const{min:r,max:n,dir:o,inverted:a,onSlideStart:s,onSlideMove:i,onSlideEnd:u,onStepKeyDown:m,...C}=e,[l,h]=d.useState(null),b=A(t,f=>h(f)),g=d.useRef(void 0),x=De(o),v=x==="ltr",p=v&&!a||!v&&a;function w(f){const S=g.current||l.getBoundingClientRect(),P=[0,S.width],F=W(P,p?[r,n]:[n,r]);return g.current=S,F(f-S.left)}return c.jsx(ae,{scope:e.__scopeSlider,startEdge:p?"left":"right",endEdge:p?"right":"left",direction:p?1:-1,size:"width",children:c.jsx(ce,{dir:x,"data-orientation":"horizontal",...C,ref:b,style:{...C.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:f=>{const S=w(f.clientX);s==null||s(S)},onSlideMove:f=>{const S=w(f.clientX);i==null||i(S)},onSlideEnd:()=>{g.current=void 0,u==null||u()},onStepKeyDown:f=>{const P=ne[p?"from-left":"from-right"].includes(f.key);m==null||m({event:f,direction:P?-1:1})}})})}),ze=d.forwardRef((e,t)=>{const{min:r,max:n,inverted:o,onSlideStart:a,onSlideMove:s,onSlideEnd:i,onStepKeyDown:u,...m}=e,C=d.useRef(null),l=A(t,C),h=d.useRef(void 0),b=!o;function g(x){const v=h.current||C.current.getBoundingClientRect(),p=[0,v.height],f=W(p,b?[n,r]:[r,n]);return h.current=v,f(x-v.top)}return c.jsx(ae,{scope:e.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:c.jsx(ce,{"data-orientation":"vertical",...m,ref:l,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const v=g(x.clientY);a==null||a(v)},onSlideMove:x=>{const v=g(x.clientY);s==null||s(v)},onSlideEnd:()=>{h.current=void 0,i==null||i()},onStepKeyDown:x=>{const p=ne[b?"from-bottom":"from-top"].includes(x.key);u==null||u({event:x,direction:p?-1:1})}})})}),ce=d.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:i,onStepKeyDown:u,...m}=e,C=O(k,r);return c.jsx(K.span,{...m,ref:t,onKeyDown:_(e.onKeyDown,l=>{l.key==="Home"?(s(l),l.preventDefault()):l.key==="End"?(i(l),l.preventDefault()):te.concat(re).includes(l.key)&&(u(l),l.preventDefault())}),onPointerDown:_(e.onPointerDown,l=>{const h=l.target;h.setPointerCapture(l.pointerId),l.preventDefault(),C.thumbs.has(h)?h.focus():n(l)}),onPointerMove:_(e.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&o(l)}),onPointerUp:_(e.onPointerUp,l=>{const h=l.target;h.hasPointerCapture(l.pointerId)&&(h.releasePointerCapture(l.pointerId),a(l))})})}),le="SliderTrack",ue=d.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,o=O(le,r);return c.jsx(K.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...n,ref:t})});ue.displayName=le;var Y="SliderRange",de=d.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,o=O(Y,r),a=ie(Y,r),s=d.useRef(null),i=A(t,s),u=o.values.length,m=o.values.map(h=>me(h,o.min,o.max)),C=u>1?Math.min(...m):0,l=100-Math.max(...m);return c.jsx(K.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...n,ref:i,style:{...e.style,[a.startEdge]:C+"%",[a.endEdge]:l+"%"}})});de.displayName=Y;var q="SliderThumb",fe=d.forwardRef((e,t)=>{const r=_e(e.__scopeSlider),[n,o]=d.useState(null),a=A(t,i=>o(i)),s=d.useMemo(()=>n?r().findIndex(i=>i.ref.current===n):-1,[r,n]);return c.jsx(Ve,{...e,ref:a,index:s})}),Ve=d.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:o,...a}=e,s=O(q,r),i=ie(q,r),[u,m]=d.useState(null),C=A(t,w=>m(w)),l=u?s.form||!!u.closest("form"):!0,h=Ae(u),b=s.values[n],g=b===void 0?0:me(b,s.min,s.max),x=Oe(n,s.values.length),v=h==null?void 0:h[i.size],p=v?Fe(v,g,i.direction):0;return d.useEffect(()=>{if(u)return s.thumbs.add(u),()=>{s.thumbs.delete(u)}},[u,s.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${g}% + ${p}px)`},children:[c.jsx(U.ItemSlot,{scope:e.__scopeSlider,children:c.jsx(K.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":s.min,"aria-valuenow":b,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...a,ref:C,style:b===void 0?{display:"none"}:e.style,onFocus:_(e.onFocus,()=>{s.valueIndexToChangeRef.current=n})})}),l&&c.jsx(Be,{name:o??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:b},n)]})});fe.displayName=q;var Be=e=>{const{value:t,...r}=e,n=d.useRef(null),o=je(t);return d.useEffect(()=>{const a=n.current,s=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(s,"value").set;if(o!==t&&u){const m=new Event("input",{bubbles:!0});u.call(a,t),a.dispatchEvent(m)}},[o,t]),c.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function Ke(e=[],t,r){const n=[...e];return n[r]=t,n.sort((o,a)=>o-a)}function me(e,t,r){const a=100/(r-t)*(e-t);return Q(a,[0,100])}function Oe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Le(e,t){if(e.length===1)return 0;const r=e.map(o=>Math.abs(o-t)),n=Math.min(...r);return r.indexOf(n)}function Fe(e,t,r){const n=e/2,a=W([0,50],[0,n]);return(n-a(t)*r)*r}function $e(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function He(e,t){if(t>0){const r=$e(e);return Math.min(...r)>=t}return!0}function W(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Ue(e){return(String(e).split(".")[1]||"").length}function Ye(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var qe=se,We=ue,Xe=de,Ge=fe;function Je({className:e,defaultValue:t,value:r,min:n=0,max:o=100,...a}){const s=d.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[n,o],[r,t,n,o]);return c.jsxs(qe,{"data-slot":"slider",defaultValue:t,value:r,min:n,max:o,className:N("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...a,children:[c.jsx(We,{"data-slot":"slider-track",className:N("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:c.jsx(Xe,{"data-slot":"slider-range",className:N("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(i,u)=>c.jsx(Ge,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}function Qe(){var i,u,m,C,l,h,b,g,x,v,p,w;const{control:e,formState:t,register:r,setValue:n}=be({defaultValues:{baseDamage:100,attacksPerSecond:10,critChance:20,critDamage:150},mode:"onChange"}),[o,a]=d.useState(),s=Se({control:e});return d.useEffect(()=>{const f=s,S=f.baseDamage*f.attacksPerSecond,P=f.critChance/100*(f.critDamage/100-1);a(S*(1+P))},[s]),c.jsxs("div",{className:"min-h-screen bg-background text-foreground font-sans",children:[c.jsx(ve,{}),c.jsx("main",{className:"p-4 flex flex-col gap-y-4 items-center justify-center w-full h-full",children:c.jsxs("div",{className:"max-w-96 w-full",children:[c.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Meter App"}),c.jsxs("form",{className:"flex flex-col items-center gap-y-4",onSubmit:f=>f.preventDefault(),children:[c.jsxs("div",{className:N("grid w-full max-w-sm items-center gap-1.5",B((i=t.errors.baseDamage)==null?void 0:i.message)),children:[c.jsx(V,{htmlFor:"baseDamage",children:"Base damage"}),c.jsx(z,{type:"text",id:"baseDamage",placeholder:"1500","aria-invalid":!!((u=t.errors.baseDamage)!=null&&u.message),"aria-errormessage":"baseDamage-error",...r("baseDamage",{required:!0,setValueAs:Number,validate:f=>{if(isNaN(f))return"Base damage should be a number";if(f<0)return"Base damage should be a positive number"}})}),c.jsx("p",{className:"text-xs errormessage",id:"baseDamage-error",children:(m=t.errors.baseDamage)==null?void 0:m.message})]}),c.jsxs("div",{className:N("grid w-full max-w-sm items-center gap-1.5",B((C=t.errors.attacksPerSecond)==null?void 0:C.message)),children:[c.jsx(V,{htmlFor:"attacksPerSecond",children:"Attacks per second"}),c.jsx(z,{type:"text",id:"attacksPerSecond",placeholder:"10","aria-invalid":!!((l=t.errors.attacksPerSecond)!=null&&l.message),"aria-errormessage":"attacksPerSecond-error",...r("attacksPerSecond",{required:!0,setValueAs:Number,validate:f=>{if(isNaN(f))return"Attacks per second should be a number";if(f<0)return"Attacks per second should be a positive number"}})}),c.jsx("p",{className:"text-xs errormessage",id:"attacksPerSecond-error",children:(h=t.errors.attacksPerSecond)==null?void 0:h.message})]}),c.jsxs("div",{className:N("grid w-full max-w-sm items-center gap-1.5",B((b=t.errors.critChance)==null?void 0:b.message)),children:[c.jsx(V,{htmlFor:"critChance",children:"Critical hit chance"}),c.jsxs("div",{className:"flex gap-x-2 errormessage-outside",children:[c.jsx(Je,{value:[s.critChance],max:100,step:1,onValueChange:f=>{n("critChance",f[0])},"aria-label":"Crit chance slider shadcn",id:"critChance-slider-shadcn","aria-controls":"critChance critChance-slider-native"}),c.jsx("input",{type:"range",value:s.critChance,max:100,step:1,onChange:f=>{n("critChance",Number(f.target.value))},"aria-label":"Crit chance slider native",id:"critChance-slider-native","aria-controls":"critChance critChance-slider-shadcn"}),c.jsx(z,{type:"text",id:"critChance",placeholder:"20",className:"max-w-16","aria-invalid":!!((g=t.errors.critChance)!=null&&g.message),"aria-errormessage":"critChance-error",...r("critChance",{required:!0,setValueAs:Number,validate:f=>{if(isNaN(f))return"Critical hit chance should be a number";if(f<0)return"Critical hit chance should be a positive number"}})})]}),c.jsx("p",{className:"text-xs errormessage",id:"critChance-error",children:(x=t.errors.critChance)==null?void 0:x.message})]}),c.jsxs("div",{className:N("grid w-full max-w-sm items-center gap-1.5",B((v=t.errors.critDamage)==null?void 0:v.message)),children:[c.jsx(V,{htmlFor:"critDamage",children:"Critical hit damage"}),c.jsx(z,{type:"text",id:"critDamage",placeholder:"150","aria-invalid":!!((p=t.errors.critDamage)!=null&&p.message),"aria-errormessage":"critDamage-error",...r("critDamage",{required:!0,setValueAs:Number,validate:f=>{if(isNaN(f))return"Critical hit damage should be a number";if(f<0)return"Critical hit damage should be a positive number"}})}),c.jsx("p",{className:"text-xs errormessage",id:"critDamage-error",children:(w=t.errors.critDamage)==null?void 0:w.message})]}),o!==void 0&&c.jsxs(c.Fragment,{children:[c.jsx("hr",{className:"border-gray-700 w-full my-4"}),c.jsxs("p",{"aria-label":"Result",children:["Your DPS is ",Number.isSafeInteger(o)?o:o.toFixed(2)," 🚀"]})]})]})]})})]})}function B(e){return e?"[&>label]:text-red-400 [&_input]:border-red-400 [&>p]:text-red-400":void 0}function Ze({children:e}){return c.jsx(xe,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:e})}const et=ge.createRoot(document.getElementById("app"));et.render(c.jsx(Ze,{children:c.jsx(Qe,{})}));
